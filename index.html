<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AQM Nexus | Cinematic Edition</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        :root {
            --glow: #00f2fe; --bank: #4facfe; --gold: #fcc419;
            --yt: #ff0000; --ig: #e1306c; --tg: #0088cc; --music: #a29bfe; --nexus: #6c5ce7;
        }
        body {
            /* Ø¬Ø§ÛŒÚ¯Ø°Ø§Ø±ÛŒ Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ Ø¬Ø¯ÛŒØ¯ Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ Ø¯Ø± Ú©Ø§Ù†ÙˆØ§ */
            background: url('bg.jpg.jpg') center/cover no-repeat fixed;
            color: white; font-family: 'Segoe UI', sans-serif; margin: 0; height: 100vh; overflow: hidden;
        }

        /* Ù„Ø§ÛŒÙ‡ ØªØ§Ø±ÛŒÚ©â€ŒÚ©Ù†Ù†Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ø®ÙˆØ§Ù†Ø§ÛŒÛŒ Ø¨Ù‡ØªØ± Ù†ÙˆØ¯Ù‡Ø§ */
        body::before {
            content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.4); z-index: 1;
        }

        .container { position: relative; width: 100vw; height: 100vh; display: flex; align-items: center; justify-content: center; z-index: 2; }

        /* Main Brain - Canva Asset */
        .main-brain { 
            width: 185px; height: 185px; border-radius: 50%; 
            background: url('brain.gif.gif') center/cover; 
            z-index: 10; border: 2px solid var(--glow); cursor: pointer; 
            box-shadow: 0 0 50px var(--glow);
            transition: 0.5s;
        }
        .main-brain:hover { transform: scale(1.1) rotate(5deg); box-shadow: 0 0 80px var(--glow); }
        
        /* Glass Nodes */
        .node { 
            position: absolute; width: 85px; height: 85px; border-radius: 50%; 
            background: rgba(255, 255, 255, 0.07); /* Ø­Ø§Ù„Øª Ø´ÛŒØ´Ù‡â€ŒØ§ÛŒ Ø´ÙØ§Ù */
            backdrop-filter: blur(15px); /* Ø¨Ù„ÙˆØ± Ú©Ø±Ø¯Ù† Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ Ø²ÛŒØ± Ù†ÙˆØ¯ */
            display: flex; flex-direction: column; align-items: center; justify-content: center; 
            border: 1px solid rgba(255, 255, 255, 0.2); cursor: pointer; transition: 0.4s; z-index: 20; 
        }
        .node:hover { transform: scale(1.2); box-shadow: 0 0 30px currentColor; background: rgba(255, 255, 255, 0.15); }
        .node span { font-size: 9px; margin-top: 5px; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }

        /* Placement */
        .n-video   { top: 8%; left: 50%; transform: translateX(-50%); color: var(--yt); }
        .n-roadmap { top: 25%; right: 15%; color: var(--ig); }
        .n-music   { top: 25%; left: 15%; color: var(--music); }
        .n-nexus   { top: 50%; right: 5%; transform: translateY(-50%); color: var(--nexus); }
        .n-games   { bottom: 25%; right: 15%; color: var(--glow); }
        .n-iq      { bottom: 25%; left: 15%; color: var(--gold); }
        .n-social  { bottom: 8%; left: 50%; transform: translateX(-50%); color: var(--tg); }

        /* UI Panels */
        .top-left-tools { position: absolute; top: 20px; left: 25px; display: flex; gap: 15px; z-index: 50; }
        .tool-icon { font-size: 22px; cursor: pointer; filter: drop-shadow(0 0 5px black); transition: 0.3s; }
        .top-bank { position: absolute; top: 20px; right: 25px; text-align: center; z-index: 50; cursor: pointer; }
        .mini-ario-brain { width: 65px; height: 65px; background: rgba(0,0,0,0.5); border-radius: 50%; border: 2px solid var(--bank); display: flex; align-items: center; justify-content: center; backdrop-filter: blur(10px); }

        .modal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 360px; background: rgba(0, 0, 0, 0.9); backdrop-filter: blur(40px); border-radius: 20px; border: 1px solid var(--glow); padding: 25px; z-index: 100; }
        .quest-box { position: absolute; bottom: 25px; left: 25px; background: rgba(0,0,0,0.7); backdrop-filter: blur(15px); padding: 18px; border-radius: 15px; border-left: 5px solid var(--glow); width: 300px; z-index: 30; border: 1px solid rgba(255,255,255,0.1); }
        .btn-prime { background: var(--bank); border: none; color: white; padding: 12px; border-radius: 10px; cursor: pointer; font-weight: bold; width: 100%; margin-top: 10px; }
    </style>
</head>
<body>

    <div class="top-left-tools">
        <div class="tool-icon" onclick="playClick(); showLeaderboard()">ğŸ†</div>
        <div class="tool-icon" onclick="playClick(); logout()">ğŸ”’</div>
        <div class="tool-icon" onclick="playClick(); copyLink()">ğŸ”—</div>
    </div>

    <div class="top-bank" onclick="playClick(); openVault()">
        <div class="mini-ario-brain">ğŸ’</div>
        <p style="font-size: 10px; color: var(--bank); margin: 5px 0; font-weight: bold;">VAULT</p>
    </div>

    <div class="container">
        <div class="main-brain" onclick="playClick(); showApp('Nexus')"></div>
        <div class="node n-video" onclick="playClick(); openModal('videoModal')">ğŸ¬<span>Videos</span></div>
        <div class="node n-roadmap" onclick="playClick(); showApp('Roadmap')">ğŸ—ºï¸<span>Roadmap</span></div>
        <div class="node n-music" onclick="playClick(); showApp('Radio')">ğŸµ<span>Music</span></div>
        <div class="node n-nexus" onclick="playClick(); showApp('Nexus')">ğŸ”®<span>Nexus</span></div>
        <div class="node n-games" onclick="playClick(); startMiniGame()">ğŸ®<span>Games</span></div>
        <div class="node n-iq" onclick="playClick(); startIQTest()">ğŸ§ <span>IQ Test</span></div>
        <div class="node n-social" onclick="playClick(); openConnect()">âœˆï¸<span>Connect</span></div>
    </div>

    <div class="quest-box" id="notif">
        <h4 style="margin:0; color:var(--glow);">System Synchronized</h4>
        <p style="font-size: 11px; margin-top:5px;">Quantum background active.</p>
    </div>

    <div id="videoModal" class="modal">
        <h4 style="color:var(--yt); margin:0 0 10px 0;">ğŸ¬ Quantum Cinema</h4>
        <iframe width="100%" height="200" src="https://www.youtube.com/embed/jfKfPfyJRdk" frameborder="0" allowfullscreen style="border-radius:12px;"></iframe>
        <button onclick="closeModal('videoModal')" class="btn-prime" style="background:#222;">Close</button>
    </div>

    <div id="walletModal" class="modal">
        <h3 style="color: var(--bank); text-align: center; margin-top:0;">ğŸ¦ Assets Vault</h3>
        <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 12px;">
            <p>Ario Coin: <b id="gold-bal" style="color:var(--gold);">0</b></p>
            <p>Mini-Ario: <b id="mini-bal" style="color:var(--bank);">0</b></p>
        </div>
        <button onclick="exchange()" class="btn-prime">Mint 1 Ario (100M)</button>
        <button onclick="closeModal('walletModal')" class="btn-prime" style="background:transparent; border:1px solid #444;">Close</button>
    </div>

    <script>
        // Supabase Logic remains the same
        const supabaseUrl = 'https://ccusimbyepxhhjxbopbn.supabase.co';
        const supabaseAnonKey = 'sb_publishable_sqnNTDNwGoibZmFxqi57pg_nqtoK2TU';
        const _supabase = supabase.createClient(supabaseUrl, supabaseAnonKey);

        let ario = 0, mini = 150;
        let userName = localStorage.getItem('aqm_user') || "";
        let userPin = localStorage.getItem('aqm_pin') || "";

        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function playClick() {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.frequency.setValueAtTime(880, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.1);
            osc.connect(gain); gain.connect(audioCtx.destination);
            osc.start(); osc.stop(audioCtx.currentTime + 0.1);
        }

        window.onload = function() {
            if (!userName) initProfile();
            else showApp('Nexus');
            updateBalances();
        };

        function initProfile() {
            const name = prompt("Choose Username:");
            const pin = prompt("Choose 4-digit PIN:");
            if (name && pin) {
                userName = name; userPin = pin;
                localStorage.setItem('aqm_user', name);
                localStorage.setItem('aqm_pin', pin);
                showApp('Nexus');
            }
        }

        function openVault() {
            if (prompt("Enter PIN:") === userPin) openModal('walletModal');
            else alert("Access Denied");
        }

        function showApp(n) {
            const nt = document.getElementById('notif');
            if(n === 'Nexus') {
                nt.innerHTML = `<h4 style="color:var(--nexus); margin:0;">ğŸ”® Nexus Hub</h4><p style="font-size:10px; margin-top:5px;">User: ${userName}<br>Atmosphere: Cinematic<br>Core: Online</p>`;
            } else if(n === 'Roadmap') {
                nt.innerHTML = `<h4 style="color:var(--ig); margin:0;">ğŸ—ºï¸ Roadmap</h4><p style="font-size:10px;">Q1: Visual Assets<br>Q2: AI Voice<br>Q3: Metaverse</p>`;
            }
        }

        function startMiniGame() { mini+=10; updateBalances(); alert("+10 Mini-Ario!"); }
        function startIQTest() { mini+=50; updateBalances(); alert("+50 Mini-Ario!"); }
        function openModal(id) { document.getElementById(id).style.display = 'block'; }
        function closeModal(id) { document.getElementById(id).style.display = 'none'; }
        function updateBalances() { document.getElementById('gold-bal').innerText = ario; document.getElementById('mini-bal').innerText = mini; }
        function logout() { localStorage.clear(); location.reload(); }
        function copyLink() { navigator.clipboard.writeText(window.location.href); alert("Referral Link Copied!"); }
        function exchange() { if(mini >= 100) { mini -= 100; ario += 1; updateBalances(); alert("Success!"); } }
        async function saveScore(p) { await _supabase.from('user_scores').insert([{ username: userName || "Guest", score: p }]); }
    </script>
</body>
</html>
